<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="shortcut icon" href="/logo" type="image/png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    crossorigin="anonymous">
</head>
<body class="text-center">
    <h1>Welcome to my website!</h1>
    <div class="btn-group" role="group" aria-label="Buttons">
        <a href="https://github.com/thenamelessdev/website-v2" target="_blank" class="btn btn-secondary">GitHub</a>
        <a href="/projects" class="btn btn-secondary">Projects</a>
        <a href="/who" class="btn btn-secondary">Who am I</a>
        <a href="https://thenamelessdev.statuspage.io/" target="_blank" class="btn btn-secondary">StatusPage</a>
        <a href="/users" class="btn btn-secondary">Log in</a>
    </div>
    <hr>
    <p>This is the 2th version of the website!</p>

    <div class="d-flex justify-content-center mt-3">
        <div class="card" style="width: 18rem;">
            <div class="card-header">
                Website Info
            </div>
            <ul id="announcementContainer" class="list-group list-group-flush">
                <li class="list-group-item"><p id="changelog">Dev Changelog: loading...</p></li>
            </ul>
        </div>
    </div>

    <br>
    <p>By using the website you aggree to our <a href="/privacy">privacy policy</a></p>
    <p>&copy; 2025 thenamelessdev. Licensed under the <a href="https://opensource.org/license/mit">MIT license.</a></p>
    <script src="https://thenamelessdev.statuspage.io/embed/script.js"></script>
    <script>
        const changelogText = document.getElementById("changelog");
        const announcementContainer = document.getElementById("announcementContainer");

        async function updateThings() {
            const announcement = await fetch("/api/v1/announcement");
            const announcementJson = await announcement.json();
            if(announcementJson.announcement == "" || announcementJson.announcement == undefined){
                
            }
            else{
                const announcementLi = document.createElement("li");
                announcementLi.className = "list-group-item";
                announcementLi.innerText = `Announcement: ${announcementJson.announcement}`;
                announcementContainer.appendChild(announcementLi);
            }

            const changelogReq = await fetch("https://raw.githubusercontent.com/thenamelessdev/website-v2/refs/heads/dev/changelog.txt", {
                headers: {
                    "Accept": "application/json"
                }
            });
            const changelog = await changelogReq.text();
            changelogText.textContent = `Dev Changelog: ${changelog}`;
            
        }
        updateThings();
    </script>
</body>
</html>