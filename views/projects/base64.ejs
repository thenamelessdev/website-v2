<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    crossorigin="anonymous">
</head>
<body class="text-center">
    <h1>Base64</h1>
    <p><b>Do stuff with Base64</b></p>
    <a href="/projects"><button class="btn btn-secondary">Go back</button></a>
    <hr>

    <div class="d-flex justify-content-center mt-4">
    <div class="form-floating w-50">
        <textarea class="form-control" id="text"></textarea>
        <label for="text">Text</label>
    </div>
    </div>
    <hr>
    <div class="d-inline-flex w-auto">
    <select id="select" class="form-select">
        <option value="decode">Decode</option>
        <option value="encode" selected>Encode</option>
    </select>
    </div>
    <hr>
    <label for="out">Output:</label>
    <div class="d-flex justify-content-center mt-4"><input type="text" id="out" disabled class="form-control w-auto"></div>
    <br>
    <button class="btn btn-primary" id="copy">Copy</button>

    <script>
        const text = document.getElementById("text");
        const select = document.getElementById("select");
        const output = document.getElementById("out");

        function encode(text) {
            return btoa(text);
        }

        function decode(text){
            return atob(text);
        }

        setInterval(() => {
            if(select.value == "decode"){
                output.value = decode(text.value);
            }
            else{
                output.value = encode(text.value)
            }
        }, 500);

        document.getElementById("copy").addEventListener("click", () => {
            navigator.clipboard.writeText(output.value);
        });
    </script>
</body>
</html>